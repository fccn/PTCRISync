<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_75) on Fri Dec 02 13:03:46 WET 2016 -->
<title>PTCRISync</title>
<meta name="date" content="2016-12-02">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="PTCRISync";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/PTCRISync.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../pt/ptcris/ORCIDClientImpl.html" title="class in pt.ptcris"><span class="strong">Prev Class</span></a></li>
<li><a href="../../pt/ptcris/PTCRISyncResult.html" title="class in pt.ptcris"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?pt/ptcris/PTCRISync.html" target="_top">Frames</a></li>
<li><a href="PTCRISync.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">pt.ptcris</div>
<h2 title="Class PTCRISync" class="title">Class PTCRISync</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>pt.ptcris.PTCRISync</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public final class <span class="strong">PTCRISync</span>
extends java.lang.Object</pre>
<div class="block"><p>
 An implementation of the PTCRISync synchronization service based on the
 version 5.0 of the specification. This service allows CRIS services to
 maintain their repositories synchronized with ORCID. This requires the CRIS
 service to have access to the ORCID Member API.
 </p>

 <p>
 The service has two main functionalities: to keep a set of local productions
 updated in an ORCID user profile through an
 <a href="../../pt/ptcris/PTCRISync.html#export(pt.ptcris.ORCIDClient,%20java.util.List,%20pt.ptcris.handlers.ProgressHandler)"><code>export</code></a> procedure, and
 import productions not known locally from the ORCID profile, either through
 the <a href="../../pt/ptcris/PTCRISync.html#importWorks(pt.ptcris.ORCIDClient,%20java.util.List,%20pt.ptcris.handlers.ProgressHandler)"><code>import</code></a> for
 completely new productions or through the
 <a href="../../pt/ptcris/PTCRISync.html#importUpdates(pt.ptcris.ORCIDClient,%20java.util.List,%20pt.ptcris.handlers.ProgressHandler)"><code>import</code></a> for new
 information for already known productions. Works must meet certain quality
 criteria to be imported (the set of invalid works can be retrieved as well
 through <a href="../../pt/ptcris/PTCRISync.html#importInvalid(pt.ptcris.ORCIDClient,%20java.util.List,%20pt.ptcris.handlers.ProgressHandler)"><code>importInvalid(ORCIDClient, List, ProgressHandler)</code></a>.
 </p>

 <p>
 The implementation of the service assumes that the local CRIS communicates
 the local productions following the established ORCID schema, according to
 the Member API 2.0rc2. This uniforms the API and simplifies the
 synchronization process. The current version focuses on synchronizing
 research productions, which must be encoded as ORCID <code>works</code>.
 </p>

 <p>
 The communication with ORCID is encapsulated in an ORCID <a href="../../pt/ptcris/ORCIDClient.html" title="interface in pt.ptcris"><code>client</code></a> that contains information regarding the CRIS Member API and the ORCID
 profile that is to be managed. An <a href="../../pt/ptcris/utils/ORCIDHelper.html" title="class in pt.ptcris.utils"><code>helper</code></a> provides utility
 methods for the synchronization of works.
 </p>
 
 <p>
 The procedures do not currently consider the contributors (authors) of works
 when assessing the quality criteria nor when assessing whether works are
 up-to-date, as this information is not available in ORCID summaries and would
 require additional calls to the ORCID API.
 </p></div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="https://ptcris.pt/hub-ptcris/">https://ptcris.pt/hub-ptcris/</a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../pt/ptcris/PTCRISync.html#PTCRISync()">PTCRISync</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.util.Map&lt;java.math.BigInteger,<a href="../../pt/ptcris/PTCRISyncResult.html" title="class in pt.ptcris">PTCRISyncResult</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../pt/ptcris/PTCRISync.html#export(pt.ptcris.ORCIDClient,%20java.util.List,%20pt.ptcris.handlers.ProgressHandler)">export</a></strong>(<a href="../../pt/ptcris/ORCIDClient.html" title="interface in pt.ptcris">ORCIDClient</a>&nbsp;client,
      java.util.List&lt;org.um.dsi.gavea.orcid.model.work.Work&gt;&nbsp;localWorks,
      <a href="../../pt/ptcris/handlers/ProgressHandler.html" title="interface in pt.ptcris.handlers">ProgressHandler</a>&nbsp;handler)</code>
<div class="block">
 A version of the export procedure that tests whether the meta-data is
 up-to-date prior to updating a work in ORCID.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.util.Map&lt;java.math.BigInteger,<a href="../../pt/ptcris/PTCRISyncResult.html" title="class in pt.ptcris">PTCRISyncResult</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../pt/ptcris/PTCRISync.html#exportForce(pt.ptcris.ORCIDClient,%20java.util.List,%20pt.ptcris.handlers.ProgressHandler)">exportForce</a></strong>(<a href="../../pt/ptcris/ORCIDClient.html" title="interface in pt.ptcris">ORCIDClient</a>&nbsp;client,
           java.util.List&lt;org.um.dsi.gavea.orcid.model.work.Work&gt;&nbsp;localWorks,
           <a href="../../pt/ptcris/handlers/ProgressHandler.html" title="interface in pt.ptcris.handlers">ProgressHandler</a>&nbsp;handler)</code>
<div class="block">
 A version of the export procedure that forces the update of the CRIS
 sourced works at ORCID, even if they are already up-to-date.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.Integer</code></td>
<td class="colLast"><code><strong><a href="../../pt/ptcris/PTCRISync.html#importCounter(pt.ptcris.ORCIDClient,%20java.util.List,%20pt.ptcris.handlers.ProgressHandler)">importCounter</a></strong>(<a href="../../pt/ptcris/ORCIDClient.html" title="interface in pt.ptcris">ORCIDClient</a>&nbsp;client,
             java.util.List&lt;org.um.dsi.gavea.orcid.model.work.Work&gt;&nbsp;localWorks,
             <a href="../../pt/ptcris/handlers/ProgressHandler.html" title="interface in pt.ptcris.handlers">ProgressHandler</a>&nbsp;handler)</code>
<div class="block">
 Counts new valid works in an ORCID profile given a set of known local
 CRIS productions, following the criteria of
 <a href="../../pt/ptcris/PTCRISync.html#importWorks(pt.ptcris.ORCIDClient,%20java.util.List,%20pt.ptcris.handlers.ProgressHandler)"><code>importWorks(ORCIDClient, List, ProgressHandler)</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.util.Map&lt;org.um.dsi.gavea.orcid.model.work.Work,java.util.Set&lt;java.lang.String&gt;&gt;</code></td>
<td class="colLast"><code><strong><a href="../../pt/ptcris/PTCRISync.html#importInvalid(pt.ptcris.ORCIDClient,%20java.util.List,%20pt.ptcris.handlers.ProgressHandler)">importInvalid</a></strong>(<a href="../../pt/ptcris/ORCIDClient.html" title="interface in pt.ptcris">ORCIDClient</a>&nbsp;client,
             java.util.List&lt;org.um.dsi.gavea.orcid.model.work.Work&gt;&nbsp;localWorks,
             <a href="../../pt/ptcris/handlers/ProgressHandler.html" title="interface in pt.ptcris.handlers">ProgressHandler</a>&nbsp;handler)</code>
<div class="block">
 Discovers new invalid works (that do not pass the quality criteria) in an
 ORCID profile given a set of known local CRIS productions, as well as the
 causes for invalidity (defined at <a href="../../pt/ptcris/utils/ORCIDHelper.html" title="class in pt.ptcris.utils"><code>ORCIDHelper</code></a>).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.util.List&lt;org.um.dsi.gavea.orcid.model.work.Work&gt;</code></td>
<td class="colLast"><code><strong><a href="../../pt/ptcris/PTCRISync.html#importUpdates(pt.ptcris.ORCIDClient,%20java.util.List,%20pt.ptcris.handlers.ProgressHandler)">importUpdates</a></strong>(<a href="../../pt/ptcris/ORCIDClient.html" title="interface in pt.ptcris">ORCIDClient</a>&nbsp;client,
             java.util.List&lt;org.um.dsi.gavea.orcid.model.work.Work&gt;&nbsp;localWorks,
             <a href="../../pt/ptcris/handlers/ProgressHandler.html" title="interface in pt.ptcris.handlers">ProgressHandler</a>&nbsp;handler)</code>
<div class="block">
 Discovers updates to existing local CRIS productions in an ORCID profile.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.util.List&lt;org.um.dsi.gavea.orcid.model.work.Work&gt;</code></td>
<td class="colLast"><code><strong><a href="../../pt/ptcris/PTCRISync.html#importWorks(pt.ptcris.ORCIDClient,%20java.util.List,%20pt.ptcris.handlers.ProgressHandler)">importWorks</a></strong>(<a href="../../pt/ptcris/ORCIDClient.html" title="interface in pt.ptcris">ORCIDClient</a>&nbsp;client,
           java.util.List&lt;org.um.dsi.gavea.orcid.model.work.Work&gt;&nbsp;localWorks,
           <a href="../../pt/ptcris/handlers/ProgressHandler.html" title="interface in pt.ptcris.handlers">ProgressHandler</a>&nbsp;handler)</code>
<div class="block">
 Discovers new valid works in an ORCID profile given a set of known local
 CRIS productions.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="PTCRISync()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>PTCRISync</h4>
<pre>public&nbsp;PTCRISync()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="export(pt.ptcris.ORCIDClient, java.util.List, pt.ptcris.handlers.ProgressHandler)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>export</h4>
<pre>public static&nbsp;java.util.Map&lt;java.math.BigInteger,<a href="../../pt/ptcris/PTCRISyncResult.html" title="class in pt.ptcris">PTCRISyncResult</a>&gt;&nbsp;export(<a href="../../pt/ptcris/ORCIDClient.html" title="interface in pt.ptcris">ORCIDClient</a>&nbsp;client,
                                                         java.util.List&lt;org.um.dsi.gavea.orcid.model.work.Work&gt;&nbsp;localWorks,
                                                         <a href="../../pt/ptcris/handlers/ProgressHandler.html" title="interface in pt.ptcris.handlers">ProgressHandler</a>&nbsp;handler)
                                                                  throws org.um.dsi.gavea.orcid.client.exception.OrcidClientException,
                                                                         java.lang.NullPointerException</pre>
<div class="block"><p>
 A version of the export procedure that tests whether the meta-data is
 up-to-date prior to updating a work in ORCID.
 </p>

 <p>
 A work is assumed to be up-to-date if the external identifiers, title,
 type and publication year are the same (see
 <a href="../../pt/ptcris/utils/ORCIDHelper.html#isUpToDate(org.um.dsi.gavea.orcid.model.work.Work,%20org.um.dsi.gavea.orcid.model.work.WorkSummary)"><code>ORCIDHelper.isUpToDate(Work, WorkSummary)</code></a>).
 </p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>client</code> - the ORCID client defining the CRIS Member API and user the
            profile to be managed</dd><dd><code>localWorks</code> - the list of local productions to be exported that should be
            kept synchronized in the ORCID user profile</dd><dd><code>handler</code> - the progress handler responsible for receiving progress
            updates</dd>
<dt><span class="strong">Returns:</span></dt><dd>the result of the synchronization of each of the provided local
          works.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>org.um.dsi.gavea.orcid.client.exception.OrcidClientException</code> - if the communication with ORCID fails when getting the
             activities summary</dd>
<dd><code>java.lang.NullPointerException</code> - if any of the arguments is null</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../pt/ptcris/PTCRISync.html#exportBase(pt.ptcris.ORCIDClient,%20java.util.List,%20pt.ptcris.handlers.ProgressHandler,%20boolean)"><code>exportBase(ORCIDClient, List, ProgressHandler, boolean)</code></a></dd></dl>
</li>
</ul>
<a name="exportForce(pt.ptcris.ORCIDClient, java.util.List, pt.ptcris.handlers.ProgressHandler)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>exportForce</h4>
<pre>public static&nbsp;java.util.Map&lt;java.math.BigInteger,<a href="../../pt/ptcris/PTCRISyncResult.html" title="class in pt.ptcris">PTCRISyncResult</a>&gt;&nbsp;exportForce(<a href="../../pt/ptcris/ORCIDClient.html" title="interface in pt.ptcris">ORCIDClient</a>&nbsp;client,
                                                              java.util.List&lt;org.um.dsi.gavea.orcid.model.work.Work&gt;&nbsp;localWorks,
                                                              <a href="../../pt/ptcris/handlers/ProgressHandler.html" title="interface in pt.ptcris.handlers">ProgressHandler</a>&nbsp;handler)
                                                                       throws org.um.dsi.gavea.orcid.client.exception.OrcidClientException,
                                                                              java.lang.NullPointerException</pre>
<div class="block"><p>
 A version of the export procedure that forces the update of the CRIS
 sourced works at ORCID, even if they are already up-to-date.
 </p>

 <p>
 The caller of this method should guarantee that the input local works
 have been effectively updated, otherwise there will be unnecessary calls
 to the ORCID API.
 </p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>client</code> - the ORCID client defining the CRIS Member API and user the
            profile to be managed</dd><dd><code>localWorks</code> - the list of local productions to be exported that should be
            kept synchronized in the ORCID user profile</dd><dd><code>handler</code> - the progress handler responsible for receiving progress
            updates</dd>
<dt><span class="strong">Returns:</span></dt><dd>the result of the synchronization of each of the provided local
          works.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>org.um.dsi.gavea.orcid.client.exception.OrcidClientException</code> - if the communication with ORCID fails when getting the
             activities summary</dd>
<dd><code>java.lang.NullPointerException</code> - if any of the arguments is null</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../pt/ptcris/PTCRISync.html#exportBase(pt.ptcris.ORCIDClient,%20java.util.List,%20pt.ptcris.handlers.ProgressHandler,%20boolean)"><code>exportBase(ORCIDClient, List, ProgressHandler, boolean)</code></a></dd></dl>
</li>
</ul>
<a name="importWorks(pt.ptcris.ORCIDClient, java.util.List, pt.ptcris.handlers.ProgressHandler)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>importWorks</h4>
<pre>public static&nbsp;java.util.List&lt;org.um.dsi.gavea.orcid.model.work.Work&gt;&nbsp;importWorks(<a href="../../pt/ptcris/ORCIDClient.html" title="interface in pt.ptcris">ORCIDClient</a>&nbsp;client,
                                                                 java.util.List&lt;org.um.dsi.gavea.orcid.model.work.Work&gt;&nbsp;localWorks,
                                                                 <a href="../../pt/ptcris/handlers/ProgressHandler.html" title="interface in pt.ptcris.handlers">ProgressHandler</a>&nbsp;handler)
                                                                          throws org.um.dsi.gavea.orcid.client.exception.OrcidClientException,
                                                                                 java.lang.InterruptedException,
                                                                                 java.lang.NullPointerException</pre>
<div class="block"><p>
 Discovers new valid works in an ORCID profile given a set of known local
 CRIS productions. Creates creation notifications for each work group at
 ORCID (merged into as a single work by the <a href="../../pt/ptcris/utils/ORCIDHelper.html" title="class in pt.ptcris.utils"><code>helper</code></a>)
 without matching local productions (i.e., those without shared
 <code>external identifiers</code>). To import updates for
 works with shared external identifiers
 <a href="../../pt/ptcris/PTCRISync.html#importUpdates(pt.ptcris.ORCIDClient,%20java.util.List,%20pt.ptcris.handlers.ProgressHandler)"><code>importUpdates(ORCIDClient, List, ProgressHandler)</code></a> should be used
 instead.
 </p>

 <p>
 Currently, these creation notifications simply take the shape of ORCID
 works themselves (representing a merged work group). The group merging
 selects the meta-data of the preferred work and the external identifiers
 of the whole group (see <a href="../../pt/ptcris/utils/ORCIDHelper.html#groupToWork(org.um.dsi.gavea.orcid.model.activities.WorkGroup)"><code>ORCIDHelper.groupToWork(WorkGroup)</code></a>). The
 selection of the meta-data from a group could be changed without
 affecting the correction of the procedure.
 </p>

 <p>
 Since the put-code attribute is used as a local key of each work, it is
 null for these creation notifications (and not the put-code of the remote
 ORCID works that gave origin to it). Since only the external identifiers
 of the local productions are used to search for matches, the remainder
 meta-data of the input local works could be left null.
 </p>

 <p>
 ORCID works without minimal quality are ignored by this procedure.
 Currently, the quality criteria forces the existence of external
 identifiers, the title, publication year and publication type (see
 <a href="../../pt/ptcris/utils/ORCIDHelper.html#testMinimalQuality(org.um.dsi.gavea.orcid.model.work.Work)"><code>ORCIDHelper.testMinimalQuality(Work)</code></a>). Works that do not match the
 criteria can be imported with
 <a href="../../pt/ptcris/PTCRISync.html#importInvalid(pt.ptcris.ORCIDClient,%20java.util.List,%20pt.ptcris.handlers.ProgressHandler)"><code>importInvalid(ORCIDClient, List, ProgressHandler)</code></a>. Note that
 currently group merging simply collects the meta-data (other than the
 external identifiers) from the preferred work, which is used in the
 quality assessment.
 </p>
 
 <p>
 This procedure performs a GET call to the API to obtain the summaries and
 an additional GET call for each work identified as valid. The procedure
 only fails if the initial GET fails. Asynchronous workers are used for
 getting the full works.
 </p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>client</code> - the ORCID client defining the CRIS Member API and user the
            profile to be managed</dd><dd><code>localWorks</code> - the full list of local productions</dd><dd><code>handler</code> - the progress handler responsible for receiving progress
            updates</dd>
<dt><span class="strong">Returns:</span></dt><dd>the list of new valid works found in the ORCID profile</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>org.um.dsi.gavea.orcid.client.exception.OrcidClientException</code> - if the communication with ORCID fails when getting the
             activities summary</dd>
<dd><code>java.lang.InterruptedException</code> - if the asynchronous GET process is interrupted</dd>
<dd><code>java.lang.NullPointerException</code> - if any of the arguments is null</dd></dl>
</li>
</ul>
<a name="importCounter(pt.ptcris.ORCIDClient, java.util.List, pt.ptcris.handlers.ProgressHandler)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>importCounter</h4>
<pre>public static&nbsp;java.lang.Integer&nbsp;importCounter(<a href="../../pt/ptcris/ORCIDClient.html" title="interface in pt.ptcris">ORCIDClient</a>&nbsp;client,
                              java.util.List&lt;org.um.dsi.gavea.orcid.model.work.Work&gt;&nbsp;localWorks,
                              <a href="../../pt/ptcris/handlers/ProgressHandler.html" title="interface in pt.ptcris.handlers">ProgressHandler</a>&nbsp;handler)
                                       throws org.um.dsi.gavea.orcid.client.exception.OrcidClientException,
                                              java.lang.NullPointerException</pre>
<div class="block"><p>
 Counts new valid works in an ORCID profile given a set of known local
 CRIS productions, following the criteria of
 <a href="../../pt/ptcris/PTCRISync.html#importWorks(pt.ptcris.ORCIDClient,%20java.util.List,%20pt.ptcris.handlers.ProgressHandler)"><code>importWorks(ORCIDClient, List, ProgressHandler)</code></a>.
 </p>

 <p>
 This procedure simply performs a GET call to the API to obtain the
 summaries, since the remainder meta-data is irrelevant, rendering it more
 efficient than <a href="../../pt/ptcris/PTCRISync.html#importWorks(pt.ptcris.ORCIDClient,%20java.util.List,%20pt.ptcris.handlers.ProgressHandler)"><code>importWorks(ORCIDClient, List, ProgressHandler)</code></a>.
 </p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>client</code> - the ORCID client defining the CRIS Member API and user the
            profile to be managed</dd><dd><code>localWorks</code> - the full list of local productions</dd><dd><code>handler</code> - the progress handler responsible for receiving progress
            updates</dd>
<dt><span class="strong">Returns:</span></dt><dd>the number of new valid works found in the ORCID profile</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>org.um.dsi.gavea.orcid.client.exception.OrcidClientException</code> - if the communication with ORCID fails when getting the
             activities summary</dd>
<dd><code>java.lang.NullPointerException</code> - if any of the arguments is null</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../pt/ptcris/PTCRISync.html#importWorks(pt.ptcris.ORCIDClient,%20java.util.List,%20pt.ptcris.handlers.ProgressHandler)"><code>importWorks(ORCIDClient, List, ProgressHandler)</code></a></dd></dl>
</li>
</ul>
<a name="importInvalid(pt.ptcris.ORCIDClient, java.util.List, pt.ptcris.handlers.ProgressHandler)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>importInvalid</h4>
<pre>public static&nbsp;java.util.Map&lt;org.um.dsi.gavea.orcid.model.work.Work,java.util.Set&lt;java.lang.String&gt;&gt;&nbsp;importInvalid(<a href="../../pt/ptcris/ORCIDClient.html" title="interface in pt.ptcris">ORCIDClient</a>&nbsp;client,
                                                                                                  java.util.List&lt;org.um.dsi.gavea.orcid.model.work.Work&gt;&nbsp;localWorks,
                                                                                                  <a href="../../pt/ptcris/handlers/ProgressHandler.html" title="interface in pt.ptcris.handlers">ProgressHandler</a>&nbsp;handler)
                                                                                                           throws org.um.dsi.gavea.orcid.client.exception.OrcidClientException,
                                                                                                                  java.lang.InterruptedException,
                                                                                                                  java.lang.NullPointerException</pre>
<div class="block"><p>
 Discovers new invalid works (that do not pass the quality criteria) in an
 ORCID profile given a set of known local CRIS productions, as well as the
 causes for invalidity (defined at <a href="../../pt/ptcris/utils/ORCIDHelper.html" title="class in pt.ptcris.utils"><code>ORCIDHelper</code></a>). Other than the
 criteria, the behavior is similar to that of
 <a href="../../pt/ptcris/PTCRISync.html#importWorks(pt.ptcris.ORCIDClient,%20java.util.List,%20pt.ptcris.handlers.ProgressHandler)"><code>importWorks(ORCIDClient, List, ProgressHandler)</code></a>. Note that
 currently group merging simply collects the meta-data (other than the
 external identifiers) from the preferred work, which is used in the
 quality assessment.
 </p>

 <p>
 This procedure performs a GET call to the API to obtain the summaries and
 an additional GET call for each work identified as valid. The procedure
 only fails if the initial GET fails. Asynchronous workers are used for
 getting the full works.
 </p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>client</code> - the ORCID client defining the CRIS Member API and user the
            profile to be managed</dd><dd><code>localWorks</code> - the full list of local productions</dd><dd><code>handler</code> - the progress handler responsible for receiving progress
            updates</dd>
<dt><span class="strong">Returns:</span></dt><dd>the list of new invalid works found in the ORCID profile, as well
         as the reasons for invalidity</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>org.um.dsi.gavea.orcid.client.exception.OrcidClientException</code> - if the communication with ORCID fails when getting the
             activities summary</dd>
<dd><code>java.lang.InterruptedException</code> - if the asynchronous GET process is interrupted</dd>
<dd><code>java.lang.NullPointerException</code> - if any of the arguments is null</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../pt/ptcris/PTCRISync.html#importWorks(pt.ptcris.ORCIDClient,%20java.util.List,%20pt.ptcris.handlers.ProgressHandler)"><code>importWorks(ORCIDClient, List, ProgressHandler)</code></a></dd></dl>
</li>
</ul>
<a name="importUpdates(pt.ptcris.ORCIDClient, java.util.List, pt.ptcris.handlers.ProgressHandler)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>importUpdates</h4>
<pre>public static&nbsp;java.util.List&lt;org.um.dsi.gavea.orcid.model.work.Work&gt;&nbsp;importUpdates(<a href="../../pt/ptcris/ORCIDClient.html" title="interface in pt.ptcris">ORCIDClient</a>&nbsp;client,
                                                                   java.util.List&lt;org.um.dsi.gavea.orcid.model.work.Work&gt;&nbsp;localWorks,
                                                                   <a href="../../pt/ptcris/handlers/ProgressHandler.html" title="interface in pt.ptcris.handlers">ProgressHandler</a>&nbsp;handler)
                                                                            throws org.um.dsi.gavea.orcid.client.exception.OrcidClientException</pre>
<div class="block"><p>
 Discovers updates to existing local CRIS productions in an ORCID profile.
 For each work group at ORCID (merged into as a single work by the
 <a href="../../pt/ptcris/utils/ORCIDHelper.html" title="class in pt.ptcris.utils"><code>helper</code></a>), finds matching local productions (i.e.,
 those with shared <code>external identifiers</code>) and
 creates update notifications if not already up to date. To import works
 without shared external identifiers,
 <a href="../../pt/ptcris/PTCRISync.html#importWorks(pt.ptcris.ORCIDClient,%20java.util.List,%20pt.ptcris.handlers.ProgressHandler)"><code>importWorks(ORCIDClient, List, ProgressHandler)</code></a> should be used
 instead.
 </p>

 <p>
 Currently, these update notifications simply take the shape of ORCID
 works themselves (representing a matching work group). These works
 contain only the meta-data that needs to be updated locally. Currently,
 only the introduction of newly found external identifiers is considered
 (i.e., those that were already present in the local productions that is
 being updated are removed from the returned updates). Thus, the remainder
 fields are returned null.
 </p>

 <p>
 The local productions are tested to be up-to-date by simply checking
 whether they contain every external identifiers in the ORCID group (see
 <a href="../../pt/ptcris/utils/ORCIDHelper.html#updateWork(java.math.BigInteger,%20org.um.dsi.gavea.orcid.model.work.Work)"><code>ORCIDHelper.updateWork(BigInteger, Work)</code></a>). Thus the remainder
 meta-data of the local productions can be currently left null.
 </p>

 <p>
 The put-code attribute is used as a local key of each CRIS productions.
 This means that the returned works representing the updates have the
 put-code of the local work that is to be updated (and not the put-code of
 the ORCID works that gave origin to it).
 </p>

 <p>
 This procedure simply performs a GET call to the API to obtain the
 summaries, since the remainder meta-data is irrelevant.
 </p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>client</code> - the ORCID client defining the CRIS Member API and user the
            profile to be managed</dd><dd><code>localWorks</code> - the list of local productions for which we wish to discover
            updates, i.e., keep synchronized with ORCID</dd><dd><code>handler</code> - the progress handler responsible for receiving progress
            updates</dd>
<dt><span class="strong">Returns:</span></dt><dd>the list of updates found in the ORCID profile, pointing to the
         respective local work</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>org.um.dsi.gavea.orcid.client.exception.OrcidClientException</code> - if the communication with ORCID fails when getting the
             activities summary</dd>
<dd><code>java.lang.NullPointerException</code> - if any of the arguments is null</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/PTCRISync.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../pt/ptcris/ORCIDClientImpl.html" title="class in pt.ptcris"><span class="strong">Prev Class</span></a></li>
<li><a href="../../pt/ptcris/PTCRISyncResult.html" title="class in pt.ptcris"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?pt/ptcris/PTCRISync.html" target="_top">Frames</a></li>
<li><a href="PTCRISync.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
